/*! For license information please see main.33b0a37dc45bc04a4cb3.bundle.js.LICENSE.txt */
(()=>{var e,s={982:(e,s,t)=>{"use strict";var i=t(260);class a extends Phaser.GameObjects.Container{spine;animationState="idle";cameraPoint;constructor(e,s,t){super(e,s,t),e.add.existing(this),e.physics.add.existing(this),this.spine=e.add.spine(0,0,"player","Idle1_",!0),this.spine.setMix("Walk","Idle1_",1),this.spine.setScale(1);const i=this.spine.getBounds(),a=i.size.x/2,h=i.size.y/2;this.setPhysics(a,h),this.setScale(1),this.add([this.spine]),this.cameraPoint=e.add.rectangle(s,t- -1*h,64,64,0,0),e.cameras.main.startFollow(this.cameraPoint)}setPhysics(e,s){const t=this.body;t.setOffset(-.1*e,-s),t.setSize(e,s),t.setCollideWorldBounds(!0),t.setDrag(800,100)}update(){this.cameraPoint.x=this.body.position.x}playerMovement(e){const s=this.body;e.right.isDown?(this.spine.setOffset(0,0),this.spine.setScale(1,1),s.setVelocityX(300),"idle"==this.animationState&&(this.animationState="walk",this.spine.timeScale=1.8,this.spine.play("Walk",!0))):e.left.isDown?(this.spine.setOffset(this.spine.width,0),this.spine.setScale(-1,1),s.setVelocityX(-300),"idle"==this.animationState&&(this.animationState="walk",this.spine.timeScale=1.8,this.spine.play("Walk",!0))):"walk"==this.animationState&&(this.animationState="idle",this.spine.timeScale=1,this.spine.play("Idle1_",!0))}}class h extends Phaser.GameObjects.Text{constructor(e,s,t){super(e,s,t,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}class r extends Phaser.Physics.Arcade.Sprite{constructor(e,s,t,i){super(e,s,t,i),e.add.existing(this),this.setScale(1)}setCollision(e,s,t){}}class o extends Phaser.GameObjects.Text{score;constructor(e,s,t){super(e,s,t,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0),this.score=0}updateScore(e){this.score+=e,this.setText(`gold: ${this.score}`)}}class l{text;bar;x;y;height;value;max;constructor(e,s,t){this.text=new Phaser.GameObjects.Text(e,s,t,"alcohol:",{color:"black",fontSize:"28px"}),this.bar=new Phaser.GameObjects.Graphics(e),this.x=s+this.text.displayWidth+20,this.y=t,this.height=28,this.value=200,this.max=this.value+4,e.add.existing(this.text),e.add.existing(this.bar),this.draw()}update(e){switch(this.value+=e,!0){case this.value<=0:this.value=0;break;case this.value>=this.max-4:this.value=this.max-4}this.draw()}draw(){switch(this.bar.clear(),this.bar.fillStyle(0),this.bar.fillRect(this.x,this.y,this.max,this.height),!0){case this.value<1*this.max/3:this.bar.fillStyle(16711680);break;case this.value<2*this.max/3:this.bar.fillStyle(16760576);break;default:this.bar.fillStyle(65280)}this.bar.fillRect(this.x+2,this.y+2,this.value,this.height-4)}}class n extends Phaser.Physics.Arcade.Sprite{constructor(e,s,t){super(e,s,t,"shop"),e.add.existing(this),e.physics.add.existing(this),this.setCollideWorldBounds(!0),this.setScale(.4)}setCollision(e,s,t,i){s.physics.add.collider(t,i,(function(){e.scene.switch("MainScene","ShopScene")}))}}class c{level;generate(e,s,t,i){this.level=[];for(let a=0;a<16;a++){this.level.push([]);for(let h=0;h<i;h++){this.level[a].push({}),this.level[a][h].type=Math.round(2*Math.random());let i="";switch(this.level[a][h].type){case 0:i="none";break;case 1:i="stone";break;case 2:i="gold"}"none"!=i&&(this.level[a][h].material=new r(e,s+96*a,t+96*h,i))}}}}class d extends Phaser.Scene{fpsText;scoreUpdate;score;alcoholBar;shop;player;gold;cursors;levelGenerator;constructor(){super({key:"MainScene"})}create(){this.fpsText=new h(this,10,10),this.score=new o(this,10,40),this.alcoholBar=new l(this,10,70),this.shop=new n(this,0,this.cameras.main.height),this.player=new a(this,this.cameras.main.width/2,this.cameras.main.height),this.gold=new r(this,this.cameras.main.width,0,"gold"),this.cameras.main.backgroundColor.setTo(64,4,4),this.cursors=this.input.keyboard.createCursorKeys(),this.score.updateScore(0),this.gold.setCollision(this,this.player,this.gold),this.shop.setCollision(this.game,this,this.player,this.shop),this.levelGenerator=new c,this.levelGenerator.generate(this,320,768,32)}update(){this.fpsText.update(),this.alcoholBar.update(-.1),this.player.playerMovement(this.cursors),this.player.update(),this.gold.active||(this.score.updateScore(10),this.alcoholBar.update(10),this.gold=new r(this,Math.random()*this.cameras.main.width,0,"gold"),this.gold.setCollision(this,this.player,this.gold))}}class p extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("player","assets/img/player.png"),this.load.image("gold","assets/img/gold.png"),this.load.image("stone","assets/img/stone.png"),this.load.spine("player","assets/spine/player/Raw.json","assets/spine/player/Raw.atlas"),this.load.image("shop","assets/img/shop.png"),this.load.image("goldmine","assets/img/goldmine.png")}create(){this.scene.start("MainScene")}}t(127);class u extends Phaser.Physics.Arcade.Sprite{constructor(e,s,t){super(e,s,t,"goldmine"),e.add.existing(this),e.physics.add.existing(this),this.setCollideWorldBounds(!0),this.setScale(.4)}setCollision(e,s,t,i){s.physics.add.collider(t,i,(function(){e.scene.switch("ShopScene","MainScene")}))}}class g extends Phaser.Scene{scoreUpdate;score;alcoholBar;goldmine;player;cursors;constructor(){super({key:"ShopScene"})}create(){this.score=new o(this,10,40),this.alcoholBar=new l(this,10,70),this.goldmine=new u(this,this.cameras.main.width,this.cameras.main.height),this.player=new a(this,this.cameras.main.width-1.5*this.goldmine.displayWidth,this.cameras.main.height),this.cameras.main.backgroundColor.setTo(0,50,100,200),this.cursors=this.input.keyboard.createCursorKeys(),this.goldmine.setCollision(this.game,this,this.player,this.goldmine)}update(){this.player.playerMovement(this.cursors)}}window.Phaser=i;const m={type:i.AUTO,backgroundColor:"#ffffff",scale:{parent:"phaser-game",mode:i.Scale.FIT,autoCenter:i.Scale.CENTER_BOTH,width:1280,height:720},pixelArt:!0,plugins:{scene:[{key:"SpinePlugin",plugin:window.SpinePlugin,mapping:"spine"}]},scene:[p,d,g],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:400}}}};window.addEventListener("DOMContentLoaded",(()=>{new i.Game(m)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},t={};function i(e){var a=t[e];if(void 0!==a)return a.exports;var h=t[e]={exports:{}};return s[e].call(h.exports,h,h.exports,i),h.exports}i.m=s,e=[],i.O=(s,t,a,h)=>{if(!t){var r=1/0;for(c=0;c<e.length;c++){for(var[t,a,h]=e[c],o=!0,l=0;l<t.length;l++)(!1&h||r>=h)&&Object.keys(i.O).every((e=>i.O[e](t[l])))?t.splice(l--,1):(o=!1,h<r&&(r=h));if(o){e.splice(c--,1);var n=a();void 0!==n&&(s=n)}}return s}h=h||0;for(var c=e.length;c>0&&e[c-1][2]>h;c--)e[c]=e[c-1];e[c]=[t,a,h]},i.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={179:0};i.O.j=s=>0===e[s];var s=(s,t)=>{var a,h,[r,o,l]=t,n=0;if(r.some((s=>0!==e[s]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(l)var c=l(i)}for(s&&s(t);n<r.length;n++)h=r[n],i.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return i.O(c)},t=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})(),i.O(void 0,[216],(()=>i(982)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();