/*! For license information please see main.34201752096ab3e27b71.bundle.js.LICENSE.txt */
(()=>{var e,t={963:(e,t,s)=>{"use strict";var i=s(260);class a extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("player","assets/img/player.png"),this.load.image("gold","assets/img/gold.png"),this.load.image("stone","assets/img/stone.png"),this.load.spine("player","assets/spine/player/Raw.json","assets/spine/player/Raw.atlas"),this.load.image("shop","assets/img/shop.png"),this.load.image("goldmine","assets/img/goldmine.png")}create(){this.scene.start("MainScene"),this.scene.start("HUD")}}class h extends Phaser.GameObjects.Container{spine;animationState="idle";cameraPoint;keyA;keyD;keySPACE;constructor(e,t,s){super(e,t,s),e.add.existing(this),e.physics.add.existing(this),this.spine=e.add.spine(0,0,"player","Idle1_",!0),this.spine.setMix("Walk","Idle1_",1),this.spine.setScale(1);const i=this.spine.getBounds(),a=i.size.x/2,h=i.size.y/2;this.setPhysics(a,h),this.setScale(1),this.depth=3,this.add([this.spine]),this.cameraPoint=e.add.rectangle(t,s- -1*h,64,64,0,0),e.cameras.main.startFollow(this.cameraPoint),this.keyA=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),this.keyD=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),this.keySPACE=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE)}setPhysics(e,t){const s=this.body;s.setOffset(-.1*e,-t),s.setSize(e,t),s.setDrag(800,0)}update(){this.cameraPoint.x=this.body.position.x,this.cameraPoint.y=this.body.position.y}playerMovement(){const e=this.body;this.keyD.isDown?(this.spine.setOffset(0,0),this.spine.setScale(1,1),e.setVelocityX(300),"idle"==this.animationState&&(this.animationState="walk",this.spine.timeScale=1.8,this.spine.play("Walk",!0))):this.keyA.isDown?(this.spine.setOffset(this.spine.width,0),this.spine.setScale(-1,1),e.setVelocityX(-300),"idle"==this.animationState&&(this.animationState="walk",this.spine.timeScale=1.8,this.spine.play("Walk",!0))):"walk"==this.animationState&&(this.animationState="idle",this.spine.timeScale=1,this.spine.play("Idle1_",!0)),this.keySPACE.isDown&&e.touching.down&&e.setVelocityY(-400)}}class o extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"shop"),e.add.existing(this),e.physics.add.existing(this),this.setGravityY(-400),this.setImmovable(!0),this.setScale(.4),this.depth=2}setCollision(e,t,s,i){t.physics.add.collider(s,i,(function(){e.scene.switch("MainScene","ShopScene")}))}}class n extends Phaser.GameObjects.Text{static score;constructor(e,t,s){super(e,t,s,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0),n.score=0}static updateScore(e,t){n.score+=t,n.score<0&&(n.score=0),e.setText(`gold: ${n.score}`)}}class r{text;bar;x;y;height;value;max;constructor(e,t,s){this.text=new Phaser.GameObjects.Text(e,t,s,"alcohol:",{color:"black",fontSize:"28px"}),this.bar=new Phaser.GameObjects.Graphics(e),this.x=t+this.text.displayWidth+20,this.y=s,this.height=28,this.value=200,this.max=this.value+4,e.add.existing(this.text),e.add.existing(this.bar),this.draw()}update(e){switch(this.value+=e,!0){case this.value<=0:this.value=0;break;case this.value>=this.max-4:this.value=this.max-4}this.draw()}draw(){switch(this.bar.clear(),this.bar.fillStyle(0),this.bar.fillRect(this.x,this.y,this.max,this.height),!0){case this.value<1*this.max/3:this.bar.fillStyle(16711680);break;case this.value<2*this.max/3:this.bar.fillStyle(16760576);break;default:this.bar.fillStyle(65280)}this.bar.fillRect(this.x+2,this.y+2,this.value,this.height-4)}}class l extends Phaser.Scene{static score;static alcoholBar;constructor(){super({key:"HUD"})}create(){l.score=new n(this,20,40),l.alcoholBar=new r(this,20,70),n.updateScore(l.score,0)}update(){l.alcoholBar.update(-.1)}static updateScore(e){n.updateScore(this.score,e)}static updateAlcohol(){n.score>0&&this.alcoholBar.value<=this.alcoholBar.max&&(n.updateScore(this.score,-.5),l.alcoholBar.update(1))}}class c extends Phaser.Physics.Arcade.Sprite{blockType;constructor(e,t,s,i,a){super(e,t,s,i),e.add.existing(this),e.physics.add.existing(this),this.setGravityY(-400),this.setImmovable(!0),this.setCollision(e,a,this),this.setScale(1),this.depth=0,this.blockType=i}setCollision(e,t,s){e.physics.add.collider(t,s,(function(){const i=t.body,a=s.body;e.game.input.activePointer.leftButtonDown()&&(i.touching.down&&a.touching.up&&e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S).isDown||i.touching.left&&a.touching.right&&e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A).isDown||i.touching.right&&a.touching.left&&e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D).isDown)&&("gold"==s.blockType&&l.updateScore(10),s.destroy())}))}}class d{level;generate(e,t,s,i,a){this.level=[];for(let h=0;h<16;h++){this.level.push([]);for(let o=0;o<i;o++){this.level[h].push({}),this.level[h][o].type=Math.round(2*Math.random());let i="";switch(this.level[h][o].type){case 0:i="none";break;case 1:i="stone";break;case 2:i="gold"}"none"!=i&&(this.level[h][o].material=new c(e,t+96*h,s+96*o,i,a))}}}}class p extends Phaser.Scene{scoreUpdate;shop;player;levelGenerator;constructor(){super({key:"MainScene"})}create(){this.shop=new o(this,0,720),this.player=new h(this,this.cameras.main.width/2,this.cameras.main.height),this.cameras.main.backgroundColor.setTo(64,4,4),this.shop.setCollision(this.game,this,this.player,this.shop);for(let e=1;e<5;e++)new c(this,-256,480+96*e,"stone",this.player);for(let e=1;e<6;e++)new c(this,96*e-256,864,"stone",this.player);this.levelGenerator=new d,this.levelGenerator.generate(this,320,768,32,this.player)}update(){this.player.playerMovement(),this.player.update()}}class y extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"goldmine"),e.add.existing(this),e.physics.add.existing(this),this.setGravityY(-400),this.setImmovable(!0),this.setScale(.4),this.depth=2}setCollision(e,t,s,i){t.physics.add.collider(s,i,(function(){e.scene.switch("ShopScene","MainScene")}))}}class u extends Phaser.Scene{scoreUpdate;goldmine;player;shopFloor;constructor(){super({key:"ShopScene"})}create(){this.goldmine=new y(this,this.cameras.main.width,690),this.player=new h(this,this.cameras.main.width-1.5*this.goldmine.displayWidth,this.cameras.main.height),this.cameras.main.backgroundColor.setTo(70,70,70,255),this.goldmine.setCollision(this.game,this,this.player,this.goldmine);for(let e=1;e<5;e++)new c(this,100,480+96*e,"stone",this.player);for(let e=1;e<15;e++)new c(this,100+96*e,864,"stone",this.player)}update(){this.player.playerMovement(),l.updateAlcohol()}}s(127),window.Phaser=i;const g={type:i.AUTO,backgroundColor:"#ffffff",scale:{parent:"phaser-game",mode:i.Scale.FIT,autoCenter:i.Scale.CENTER_BOTH,width:1280,height:720},pixelArt:!0,plugins:{scene:[{key:"SpinePlugin",plugin:window.SpinePlugin,mapping:"spine"}]},scene:[a,p,u,l],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:400}}}};window.addEventListener("DOMContentLoaded",(()=>{new i.Game(g)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var h=s[e]={exports:{}};return t[e].call(h.exports,h,h.exports,i),h.exports}i.m=t,e=[],i.O=(t,s,a,h)=>{if(!s){var o=1/0;for(c=0;c<e.length;c++){for(var[s,a,h]=e[c],n=!0,r=0;r<s.length;r++)(!1&h||o>=h)&&Object.keys(i.O).every((e=>i.O[e](s[r])))?s.splice(r--,1):(n=!1,h<o&&(o=h));if(n){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}h=h||0;for(var c=e.length;c>0&&e[c-1][2]>h;c--)e[c]=e[c-1];e[c]=[s,a,h]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,h,[o,n,r]=s,l=0;if(o.some((t=>0!==e[t]))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(r)var c=r(i)}for(t&&t(s);l<o.length;l++)h=o[l],i.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return i.O(c)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(963)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();